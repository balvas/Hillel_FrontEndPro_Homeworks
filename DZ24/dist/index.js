(()=>{"use strict";new function({form:e,content:t,userInfo:a,addButton:r}){if(null===localStorage.getItem("users")){const e=[{id:1,name:"John",surname:"Doe",dateofbirth:"1999-01-01",age:0,attendanceArray:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],estimatesArray:[100,100,100],academicPerformance:""},{id:2,name:"George",surname:"Smith",dateofbirth:"2000-01-01",age:0,attendanceArray:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],estimatesArray:[100,50,70],academicPerformance:""},{id:3,name:"John",surname:"Smith",dateofbirth:"1995-01-01",age:0,attendanceArray:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],estimatesArray:[100,50,70],academicPerformance:""}].map((e=>{return{...e,age:s(e.dateofbirth),academicPerformance:(t=e.estimatesArray,t.reduce(((e,t)=>e+t))/t.length)};var t}));localStorage.setItem("users",JSON.stringify(e))}function s(e){const t=new Date(e),a=new Date;let r=a.getFullYear()-t.getFullYear();const s=a.getMonth()-t.getMonth();return(s<0||0===s&&a.getDate()<t.getDate())&&r--,r}this.init=function(){e.addEventListener("submit",(t=>{t.preventDefault(),this.addStudent(e.elements.name.value,e.elements.surname.value,e.elements.dateofbirth.value)})),r.addEventListener("click",(function(){e.reset(),e.classList.add("open")})),this.loadUsers()},this.addStudent=function(t,a,r){const n=s(r),i={id:Math.floor(100*Math.random()),name:t,surname:a,dateofbirth:r,age:n,attendanceArray:new Array(25),estimatesArray:[],academicPerformance:""};this.userTemplate(i),e.reset(),e.classList.remove("open");const o=JSON.parse(localStorage.getItem("users"))||[];o.push(i),localStorage.setItem("users",JSON.stringify(o))},this.loadUsers=function(){const e=JSON.parse(localStorage.getItem("users"));e&&e.forEach((e=>this.userTemplate(e)))},this.userTemplate=function(e){const a=document.createElement("tr");a.classList.add("js--item"),a.dataset.id=e.id,a.insertAdjacentHTML("beforeend",`<td>${e.id}</td><td>${e.name} ${e.surname}</td><td>${e.age}</td><td><button class="btn js--estimates">Add estimates</button></td><td><button class="btn js--present present">Present</button><button class="btn js--absent absent">Absent</button></td><td><button class="btn js--summary summary">View summary</button></td>`);const r=a.querySelector(".js--estimates"),s=a.querySelector(".js--present"),n=a.querySelector(".js--absent"),i=a.querySelector(".js--summary");r.addEventListener("click",(()=>this.addEstimates(e.id))),s.addEventListener("click",(()=>this.present(e.id))),n.addEventListener("click",(()=>this.absent(e.id))),i.addEventListener("click",(()=>this.summary(e.id))),t.appendChild(a)},this.addEstimates=function(e){const t=JSON.parse(localStorage.getItem("users")),a=t.find((t=>t.id===e)),r=prompt("Enter a list of numbers separated by commas:").split(",").map((e=>parseFloat(e.trim())));a.estimatesArray=[...a.estimatesArray,...r],a.academicPerformance=a.estimatesArray.reduce(((e,t)=>e+t))/a.estimatesArray.length,localStorage.setItem("users",JSON.stringify(t))},this.present=function(e){const t=JSON.parse(localStorage.getItem("users")),a=t.find((t=>t.id===e));if(a.attendanceArray.includes(null)){for(let e=0;e<25;e++)if(null===a.attendanceArray[e]){a.attendanceArray[e]=!0,localStorage.setItem("users",JSON.stringify(t));break}}else alert("All visits counted!")},this.absent=function(e){const t=JSON.parse(localStorage.getItem("users")),a=t.find((t=>t.id===e));if(a.attendanceArray.includes(null)){for(let e=0;e<25;e++)if(null===a.attendanceArray[e]){a.attendanceArray[e]=!1,localStorage.setItem("users",JSON.stringify(t));break}}else alert("All visits counted!")},this.summary=function(e){const t=JSON.parse(localStorage.getItem("users")).find((t=>t.id===e)),a=t.attendanceArray.filter(Boolean).length/t.attendanceArray.length;alert(`Your Academic performance is ${t.academicPerformance} \n And your Visit rate is ${a}`),a<.9&&t.academicPerformance<90?alert("Редиска!"):a<.9||t.academicPerformance<90?alert("Добре, але можна краще!"):alert("Молодець!")}}({form:document.querySelector(".js--form"),userInfo:document.querySelector(".js--user"),addButton:document.querySelector(".js--add"),content:document.querySelector(".js--content")}).init()})();
//# sourceMappingURL=index.js.map